import os
import pandas as pd
import numpy as np
import sys
sys.path.append(r'../..')
from d2l import torch as d2l


def SearchSmaliFile(path):
    file_list=[] 
    if not os.path.isdir(path):
        return
    list_dirs=os.walk(path)
    for root,dirs,files in list_dirs:
        for f in files:
            if f.endswith('.smali'):
                file_list.append(os.path.join(root,f)) #保存路径名为f的文件路径
    return file_list


sams=SearchSmaliFile(r"D:\Downloads\APK分析工具\7.案例\cmx")


def FileMerge(fileset,target_path):
    fo=open(target_path,'w+',encoding='utf8')
    for file in fileset:
        fi=open(file,'r',encoding='utf8')
        data=fi.read()
        fo.write(data)
        fi.close()
    fo.close()


FileMerge(sams,r'./cmx.smali')


